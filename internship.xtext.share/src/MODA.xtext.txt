// automatically generated by Xtext
grammar internship.MODA with org.eclipse.xtext.common.Terminals

import "http://www.irisa.fr/MODA/fig1"
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

MODA returns MODA:
	{MODA}
	'MODA'
	name=EString
	':' ((sociotechnicalsystem=SocioTechnicalSystem | sociotechnicalsystem=SoftwareGen)? &
	('data' '{' data+=Data ("," data+=Data)* '}')? &
	('model' '{' model+=Model ("," model+=Model)* '}')? &
	('modelrole' '{' modelrole+=ModelRole ("," modelrole+=ModelRole)* '}')? &
	('relations' '{' relations+=ModaRelation ("," relations+=ModaRelation)* '}')?);

ModelRole returns ModelRole:
	DescriptiveModel | PredictiveModel | PrescriptiveModel;

ModaRelation returns ModaRelation:
	OtherInterplay | DataPurpose | Enactment | Deployment | Preparation | Analysis | Generation | Generalization;

ModaNode returns ModaNode:
	Data | DescriptiveModel | PredictiveModel | PrescriptiveModel | Software | SocioTechnicalSystem | Model;

EString returns ecore::EString:
	STRING | ID;

Analysis returns Analysis:
	{Analysis}
	'Analysis'
	':'
	(source=[ModaNode|EString])?
	'-[' name=EString ']->'
	(target=[PrescriptiveModel|EString])?;

Preparation returns Preparation:
	{Preparation}
	'Preparation'
	':'
	(source=[ModaNode|EString])?
	'-[' name=EString ']->'
	(target=[PredictiveModel|EString])?;

SoftwareGen returns SocioTechnicalSystem:
	{SocioTechnicalSystem}
	software=Software;

SocioTechnicalSystem returns SocioTechnicalSystem:
	{SocioTechnicalSystem}
	'SocioTechnicalSystem'
	name=EString
	'{'
	('otherinterplay' otherinterplay=[OtherInterplay|EString])?
	('incomingEnactment' incomingEnactment=[Enactment|EString])?
	('software' software=Software)?
	'}';

Software returns Software:
	{Software}
	'Software'
	name=EString
	'{'
	('processing' '(' processing+=[DataPurpose|EString] ("," processing+=[DataPurpose|EString])* ')')?
	('incomingDeployment' incomingDeployment=[Deployment|EString])?
	'}';

Data returns Data:
	{Data}
	'Data'
	name=EString
	'{'
	('outgoingAnalysis' outgoingAnalysis=[Analysis|EString])?
	('outgoingPreparation' outgoingPreparation=[Preparation|EString])?
	('otherinterplay' '(' otherinterplay+=[OtherInterplay|EString] ("," otherinterplay+=[OtherInterplay|EString])* ')')?
	('processing' datapurpose=[DataPurpose|EString])?
	('generalization' generalization=[Generalization|EString])?
	'}';

Model returns Model:
	{Model}
	'Model'
	name=EString
	':'
	('modelrole' '(' modelrole+=[ModelRole|EString] ("," modelrole+=[ModelRole|EString])* ')')?;

PrescriptiveModel returns PrescriptiveModel:
	{PrescriptiveModel}
	'PrescriptiveModel'
	name=EString
	'{'
	('model' model=[Model|EString])?
	('outgoingEnactment' outgoingEnactment=[Enactment|EString])?
	('outgoingDeployment' outgoingDeployment=[Deployment|EString])?
	('incomingAnalysis' incomingAnalysis=[Analysis|EString])?
	('outgoingGeneration' outgoingGeneration=[Generation|EString])?
	('incomingGeneration' incomingGeneration=[Generation|EString])?
	'}';

Enactment returns Enactment:
	{Enactment}
	'Enactment'
	':'
	(source=[PrescriptiveModel|EString])?
	'-[' name=EString ']->'
	(target=[SocioTechnicalSystem|EString])?;

Deployment returns Deployment:
	{Deployment}
	'Deployment'
	':'
	(source=[PrescriptiveModel|EString])?
	'-[' name=EString ']->'
	(target=[Software|EString])?;

Generation returns Generation:
	{Generation}
	'Generation'
	':'
	(source=[PrescriptiveModel|EString])?
	'-[' name=EString ']->'
	(target=[PrescriptiveModel|EString])?;

DataPurpose returns DataPurpose:
	{DataPurpose}
	'DataPurpose'
	':'
	(('data' data=[Data|EString])? '-[' name=EString ('|' dataKind=DataKind)? ']->' ('software'
	software=[Software|EString])?) |
	((('software' software=[Software|EString])?) '-[' name=EString ('|' dataKind=DataKind)? ']->' ('data'
	data=[Data|EString])?);

enum DataKind returns DataKind:
	InputData='InputData' | OutputData='OutputData' | ExternalData='ExternalData' | MeasuredData='MeasuredData';

DescriptiveModel returns DescriptiveModel:
	{DescriptiveModel}
	'DescriptiveModel'
	name=EString
	'{'
	('outgoingAnalysis' outgoingAnalysis=[Analysis|EString])?
	('outgoingPreparation' outgoingPreparation=[Preparation|EString])?
	('model' model=[Model|EString])?
	('incomingGeneralization' incomingGeneralization=[Generalization|EString])?
	'}';

PredictiveModel returns PredictiveModel:
	{PredictiveModel}
	'PredictiveModel'
	name=EString
	'{'
	('outgoingAnalysis' outgoingAnalysis=[Analysis|EString])?
	('model' model=[Model|EString])?
	('incomingPreparation' incomingPreparation=[Preparation|EString])?
	'}';

Generalization returns Generalization:
	{Generalization}
	'Generalization'
	':'
	(source+=[Data|EString] ("," source+=[Data|EString])*)?
	'-[' name=EString ']->'
	(target=[DescriptiveModel|EString])?;

OtherInterplay returns OtherInterplay:
	'OtherInterplay'
	':'
	data+=[Data|EString] ("," data+=[Data|EString])*
	'-[' name=EString ']->'
	(sociotechnicalsystem=[SocioTechnicalSystem|EString])?;
